# å¼€å‘è®¡åˆ’ï¼šGame Playground ä¸ Agent ç»ˆæå½¢æ€

**æ—¥æœŸ**ï¼š2025-12-31
**çŠ¶æ€**ï¼šè§„åˆ’ä¸­
**ç›®æ ‡**ï¼šæ„å»º AI Game Playgroundï¼Œä½œä¸º Agent ç³»ç»Ÿä¸ MCP å·¥å…·åŒ…çš„æ¼”ç»ƒåœº

---

## 1. æ„¿æ™¯ (Vision)

æˆ‘ä»¬çš„ç»ˆæç›®æ ‡æ˜¯åˆ©ç”¨ Agent è¿›è¡Œ AI Gameã€‚è¿™ä¸ä»…ä»…æ˜¯è®© AI ç©æ¸¸æˆï¼Œè€Œæ˜¯æ„å»ºä¸€ä¸ªå®Œæ•´çš„**è‡ªä¸»æ™ºèƒ½ä½“ç³»ç»Ÿ (Autonomous Agent System)**ã€‚

**Game Playground** å°†ä½œä¸ºä¸€ä¸ªå—æ§çš„ã€é«˜åé¦ˆçš„å®éªŒç¯å¢ƒã€‚
**è§†è§‰é£æ ¼**ï¼šå‚è€ƒâ€œVirtual Arcadeâ€æ¦‚å¿µï¼Œæ‰“é€ ä¸€ä¸ª**èµ›åšæœ‹å…‹/éœ“è™¹å¤å¤é£æ ¼ (Cyberpunk/Retro Arcade)** çš„è™šæ‹Ÿæ¸¸ä¹åœºã€‚ç•Œé¢åº”è‰²å½©æ–‘æ–“ï¼Œå……æ»¡ç§‘æŠ€æ„Ÿï¼ˆç±»ä¼¼ã€Šæ¸¸æˆç‹ã€‹æˆ–ã€Šå¤´å·ç©å®¶ã€‹çš„è™šæ‹Ÿå¤§å…ï¼‰ï¼Œè®© Agent çš„è®­ç»ƒå’Œå¯¹æˆ˜è¿‡ç¨‹å…·å¤‡æé«˜çš„è§‚èµæ€§ã€‚

## 2. è·¯çº¿å›¾ (Roadmap)

### ç¬¬ä¸€é˜¶æ®µï¼šGame Playground åŸºç¡€ (The Foundation)
**æ ¸å¿ƒç†å¿µ**ï¼šæ­å»ºâ€œéœ“è™¹æ¸¸ä¹åœºâ€ã€‚ä¼˜å…ˆæ„å»ºæ”¯æŒ OpenAI Gym æ ‡å‡†çš„è¿è¡Œç¯å¢ƒä¸é…·ç‚«çš„å‰ç«¯å±•ç¤ºã€‚

- **UI æ¶æ„ (ç‹¬ç«‹é¡µé¢ `/playground`)**ï¼š
    - **Lobby (å¤§å…)**ï¼šå‚è€ƒ Arcade é£æ ¼ï¼Œå±•ç¤ºæ¸¸æˆå¡ç‰‡å¢™ï¼ˆPac-Man, Snake, CartPole ç­‰ï¼‰ï¼Œé…ä»¥éœ“è™¹å…‰æ•ˆã€‚
    - **Arena (ç«æŠ€åœº)**ï¼šè¿›å…¥å…·ä½“æ¸¸æˆåçš„ç•Œé¢ã€‚å·¦ä¾§ä¸ºæ¸¸æˆç”»é¢ï¼ˆCanvas/WebGLï¼‰ï¼Œå³ä¾§ä¸º Agent çš„â€œå¤§è„‘â€å¯è§†åŒ–ï¼ˆæ€è€ƒæ—¥å¿—ã€å·¥å…·è°ƒç”¨æµï¼‰ã€‚
    - **Control Deck**ï¼šåº•éƒ¨æ¨¡æ‹Ÿè¡—æœºæ‘‡æ†ä¸æŒ‰é’®ï¼Œæ—¢å¯äººå·¥æ¥ç®¡ï¼Œä¹Ÿå¯æ˜¾ç¤º Agent çš„è™šæ‹Ÿæ“ä½œåŠ¨ä½œã€‚
- **åç«¯æ¶æ„ (Python + Gymnasium)**ï¼š
    - å¼•å…¥ **FastAPI** ä½œä¸ºè¿è¡Œæ—¶ã€‚
    - æ ¸å¿ƒä¾èµ–ï¼š`gymnasium` (åŸ OpenAI Gym)ã€‚è¿™æ˜¯ RL (å¼ºåŒ–å­¦ä¹ ) çš„å·¥ä¸šæ ‡å‡†ã€‚
    - **é¦–æ‰¹æ¸¸æˆå¼•æ“ (OpenAI Gym Classic Control)**ï¼š
        - **CartPole (å€’ç«‹æ‘†)**ï¼šRL çš„ "Hello World"ï¼Œç‰©ç†åé¦ˆæ¸…æ™°ã€‚
        - **LunarLander (æœˆçƒç€é™†å™¨)**ï¼šç¨å¤æ‚ï¼Œå¸¦æœ‰è¿ç»­/ç¦»æ•£åŠ¨ä½œç©ºé—´ã€‚
        - **Snake/GridWorld**ï¼šç”¨äºæµ‹è¯•é€»è¾‘æ¨ç†å’Œè·¯å¾„è§„åˆ’ã€‚
- **å‰åç«¯é€šä¿¡**ï¼š
    - è§†é¢‘æµ/å¸§åŒæ­¥ï¼šåç«¯æ¸²æŸ“ Gym ç”»é¢ -> Base64/WebSocket -> å‰ç«¯ Canvas ç»˜åˆ¶ã€‚

### ç¬¬äºŒé˜¶æ®µï¼šä¸“ç”¨ Agent å¼€å‘ (Specialized Agents)
**æ ¸å¿ƒç†å¿µ**ï¼šé’ˆå¯¹ç‰¹å®šæ¸¸æˆå¼€å‘ç‰¹å®š Agentï¼Œç§¯ç´¯ç»éªŒã€‚

- **Rule-Based Agent**ï¼šå…ˆå®ç°åŸºäºè§„åˆ™çš„ Agentï¼ˆå¦‚ Minimax ç®—æ³•ï¼‰ï¼Œä½œä¸º Baselineã€‚
- **LLM Agent (v1)**ï¼šå°è¯•ç”¨ Prompt Engineering è®© LLM ç©æ¸¸æˆã€‚
- **Tool-Use Agent**ï¼šå¼•å…¥ MCP æ€æƒ³ï¼Œè®© Agent è°ƒç”¨ `move_up()` ç­‰å·¥å…·ï¼Œè€Œä¸æ˜¯è¾“å‡ºæ–‡æœ¬ã€‚
- **ç»éªŒæ²‰æ·€**ï¼šè®°å½•ä¸åŒ Agent åœ¨ä¸åŒæ¸¸æˆä¸­çš„è¡¨ç°ï¼Œåˆ†æ Prompt æ¨¡å¼å’Œå·¥å…·è°ƒç”¨æ¨¡å¼ã€‚

### ç¬¬ä¸‰é˜¶æ®µï¼šé€šç”¨ Agent æŠ½è±¡ (General Agent)
**æ ¸å¿ƒç†å¿µ**ï¼šä»ä¸“ç”¨èµ°å‘é€šç”¨ï¼Œæ„å»ºâ€œä¸€é€šç™¾é€šâ€çš„ Agent æ¶æ„ã€‚

- **ç»Ÿä¸€æ¥å£**ï¼šå®šä¹‰æ ‡å‡†çš„ `Observation` -> `Think` -> `Action` æ¥å£ã€‚
- **é€šç”¨è®°å¿†æ¨¡å—**ï¼šæ„å»ºè·¨æ¸¸æˆçš„è®°å¿†æœºåˆ¶ã€‚
- **å…ƒå­¦ä¹ èƒ½åŠ›**ï¼šè®© Agent èƒ½å¤Ÿé˜…è¯»æ¸¸æˆè¯´æ˜ä¹¦ï¼ˆRule Textï¼‰å¹¶å¿«é€Ÿä¸Šæ‰‹æ–°æ¸¸æˆã€‚
- **MCP æ ‡å‡†åŒ–**ï¼šå°†æ¸¸æˆç¯å¢ƒå°è£…ä¸ºæ ‡å‡†çš„ MCP Serverï¼Œä»»ä½•æ”¯æŒ MCP çš„ Agent éƒ½èƒ½ç›´æ¥æ¥å…¥ã€‚

## 3. æŠ€æœ¯æ¶æ„è§„åˆ’

### å‰ç«¯æ¨¡å— (`src/app/playground`)
- **Theme**: Tailwind CSS + Framer Motion å®ç°éœ“è™¹å…‰æ•ˆä¸å¡ç‰‡ 3D ç¿»è½¬æ•ˆæœã€‚
- **Game Renderer**: 
    - `GymRenderer`: ä¸“é—¨ç”¨äºæ¸²æŸ“ OpenAI Gym çš„ RGB Array å¸§ã€‚
- **Agent Console**: æ˜¾ç¤º Agent çš„æ€è€ƒè¿‡ç¨‹ (Reasoning) å’Œå·¥å…·è°ƒç”¨æ—¥å¿—ã€‚

### åç«¯æ¨¡å— (`backend/`)
- **Framework**: FastAPI.
- **Core Libs**: `gymnasium`, `numpy`, `pillow` (å›¾åƒå¤„ç†).
- **Environment Wrapper**: å°† Gym ç¯å¢ƒåŒ…è£…ä¸º API æœåŠ¡ï¼š
    - `POST /env/step`: æ‰§è¡ŒåŠ¨ä½œï¼Œè¿”å› `observation`, `reward`, `done`, `info`ã€‚
    - `WS /env/stream`: å®æ—¶æ¨é€æ¸¸æˆç”»é¢å¸§ã€‚

## 4. ä¸‹ä¸€æ­¥è¡ŒåŠ¨ (Next Steps)

1.  **åç«¯ç¯å¢ƒæ­å»º**ï¼šå®‰è£… `gymnasium` å’Œ `fastapi`ï¼Œè·‘é€š CartPole çš„ headless è¿è¡Œã€‚
2.  **å‰ç«¯å¤§å…è®¾è®¡**ï¼šå®ç°â€œéœ“è™¹å¡ç‰‡å¢™â€å¸ƒå±€ï¼Œè¥é€  Arcade æ°›å›´ã€‚
3.  **é“¾è·¯æ‰“é€š**ï¼šå®ç°åç«¯ Gym ç”»é¢ -> å‰ç«¯ Canvas çš„å®æ—¶ä¼ è¾“ã€‚

---

## 5. å¼€å‘è¿›åº¦è®°å½• (Development Log)

### 2025-12-31 (Day 1) - åŸºç¡€æ¶æ„æ­å»º

#### âœ… å·²å®Œæˆ

**åç«¯ (Python/FastAPI)**
- [x] åˆ›å»º `backend/` ç›®å½•ç»“æ„
- [x] é…ç½® FastAPI + Uvicorn + CORS
- [x] é›†æˆ Gymnasium (OpenAI Gym)
- [x] å®ç° `GymEnvironment` åŒ…è£…å™¨ï¼šæ”¯æŒ reset/step/render
- [x] å®ç° `SessionManager`ï¼šå¤šä¼šè¯ç®¡ç†
- [x] API ç«¯ç‚¹ï¼š
  - `GET /health` - å¥åº·æ£€æŸ¥
  - `POST /api/game/start` - å¯åŠ¨æ¸¸æˆ
  - `POST /api/game/{session_id}/step` - æ‰§è¡ŒåŠ¨ä½œ
  - `POST /api/game/{session_id}/reset` - é‡ç½®æ¸¸æˆ
  - `DELETE /api/game/{session_id}` - ç»“æŸä¼šè¯
- [x] æ¸¸æˆå¸§æ¸²æŸ“ä¸º Base64 PNG ä¼ è¾“

**å‰ç«¯ (Next.js)**
- [x] åˆ›å»º `/playground` è·¯ç”± - éœ“è™¹é£æ ¼æ¸¸æˆé€‰æ‹©å¤§å…
- [x] åˆ›å»º `/playground/[gameId]` åŠ¨æ€è·¯ç”± - å…·ä½“æ¸¸æˆé¡µé¢
- [x] å®ç° `GameCard` ç»„ä»¶ - æ¸¸æˆå¡ç‰‡å±•ç¤º
- [x] å®ç° `GameModal` ç»„ä»¶ - æ¸¸æˆè¯¦æƒ…å¼¹çª—
- [x] å®ç°æ¸¸æˆæ§åˆ¶ç•Œé¢ï¼š
  - å®æ—¶ç”»é¢æ˜¾ç¤º
  - æ‰‹åŠ¨æ§åˆ¶æŒ‰é’® (å·¦/å³/åŠ¨ä½œ)
  - é”®ç›˜æ§åˆ¶æ”¯æŒ (Arrow Keys / WASD)
  - çŠ¶æ€æ˜¾ç¤º (Steps, Reward, Status)
  - æ§åˆ¶å°æ—¥å¿—

**è¿ç»´è„šæœ¬**
- [x] å‡çº§ `restart.sh` ä¸ºå…¨æ ˆé‡å¯è„šæœ¬
  - è‡ªåŠ¨åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹
  - å¯åŠ¨ Python åç«¯ (8000)
  - å¯åŠ¨ Next.js å‰ç«¯ (3115)
  - Ctrl+C åŒæ—¶å…³é—­ä¸¤è€…

#### ğŸ® å½“å‰æ”¯æŒçš„æ¸¸æˆ

| çŠ¶æ€ | æ¸¸æˆ | Env ID | åŠ¨ä½œç©ºé—´ |
|------|------|--------|----------|
| âœ… | Cart Pole | CartPole-v1 | ç¦»æ•£ (0: å·¦, 1: å³) |
| âœ… | Mountain Car | MountainCar-v0 | ç¦»æ•£ (0: å·¦, 1: æ— , 2: å³) |
| âœ… | Acrobot | Acrobot-v1 | ç¦»æ•£ (0/1/2: æ‰­çŸ©) |
| âœ… | Pendulum | Pendulum-v1 | ç¦»æ•£ (0/1/2: æ‰­çŸ©) |
| ğŸ”œ | Lunar Lander | LunarLander-v3 | éœ€è¦ box2d |
| ğŸ”œ | Breakout | - | å¾…å¼€å‘ |
| ğŸ”œ | Space Invaders | - | å¾…å¼€å‘ |
| ğŸ”œ | Pong | - | å¾…å¼€å‘ |
| ğŸ”œ | Snake | - | å¾…å¼€å‘ |
| ğŸ”œ | Tetris | - | å¾…å¼€å‘ |

#### ğŸ“ æ–°å¢æ–‡ä»¶ç»“æ„

```
backend/
â”œâ”€â”€ main.py                 # FastAPI å…¥å£
â”œâ”€â”€ requirements.txt        # Python ä¾èµ–
â”œâ”€â”€ README.md              # åç«¯æ–‡æ¡£
â””â”€â”€ engine/
    â”œâ”€â”€ gym_wrapper.py     # Gymnasium ç¯å¢ƒåŒ…è£…
    â””â”€â”€ session_manager.py # ä¼šè¯ç®¡ç†

src/app/playground/
â”œâ”€â”€ page.tsx               # æ¸¸æˆé€‰æ‹©å¤§å… (Arcade Lobby)
â””â”€â”€ [gameId]/
    â””â”€â”€ page.tsx           # å…·ä½“æ¸¸æˆé¡µé¢

restart.sh                 # å…¨æ ˆé‡å¯è„šæœ¬ (å‡çº§)
```

#### ğŸ› å·²ä¿®å¤çš„é—®é¢˜
- CORS é…ç½®æ·»åŠ  `localhost:3115`
- WebSocket 403 é”™è¯¯ï¼ˆéçœŸæ­£é”™è¯¯ï¼Œæ¥è‡ª Next.js HMRï¼‰

---
*"æ¸¸æˆæ˜¯ AI çš„æœè‡ã€‚" â€”â€” é€šè¿‡ Game Playgroundï¼Œæˆ‘ä»¬å°†æŠŠ AGENT-Studio è¿›åŒ–ä¸ºçœŸæ­£çš„æ™ºèƒ½ä½“å®éªŒå®¤ã€‚*

